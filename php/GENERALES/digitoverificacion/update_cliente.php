<?php
	header('Access-Control-Allow-Origin: *');
	header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token');
	header('Content-Type: application/json');

	require_once('../../../config/start.inc.php');
	include_once('../../../class/class.lista.php');
	include_once('../../../class/class.complex.php');
	include_once('../../../class/class.consulta.php');

	//$nit = isset($_REQUEST['Nit']) ? $_REQUEST['Nit'] : false;

	$nrosPrimos = [3,7,13,17,19,23,29,37,41,43,47,53,59,67,71];
    $nits = idSclientes();
    foreach ($nits as $nit ) {
        # code...
  
    	$nit = limpiarString($nit);

	$totalSum = 0;
        $carLength = strlen($nit);

        $j = 0;
        for ($i=($carLength - 1); $i >= 0; $i--) { 
            $nro = $nit[$i];
            $totalSum += ($nro * $nrosPrimos[$j]);

            $j++;
        }

        $mod = $totalSum % 11;

        $digito_verificacion = $mod > 1 ? (11 - $mod) : $mod;

        $query = 'UPDATE Cliente SET Digito_Verificacion = '.$digito_verificacion.' WHERE Id_Cliente = '.$nit;
        $oItem = new consulta();

        $oItem->setQuery($query);
        $oItem->createData();
        unset($oItem);

        echo json_encode([
            "Digito_Verificacion" => $digito_verificacion , "id"=>$nit
        ]);

    }
	function limpiarString($nit) {
		
		$car1 = ['.','-'];
		$clean = ['',''];

		return str_replace($car1, $clean, $nit);
    }
    
    function idSclientes()
    {
        return [16967,
        2045783,
        2829651,
        2895423,
        3578194,
        3649064,
        5029714,
        5420663,
        5437434,
        5464760,
        5539884,
        5551121,
        5555287,
        5556682,
        5558517,
        5560275,
        5566937,
        5623760,
        5624632,
        5691711,
        5742433,
        5931952,
        7175458,
        11345054,
        12969870,
        13278279,
        13279845,
        13360696,
        13435832,
        13445393,
        13462041,
        13469260,
        13470115,
        13476955,
        13487059,
        13489998,
        13496309,
        13512176,
        13512431,
        13512736,
        13513923,
        13514181,
        13514590,
        13514793,
        13515064,
        13717072,
        13718766,
        13722796,
        13724039,
        13740486,
        13747525,
        13803796,
        13807156,
        13807994,
        13811357,
        13813131,
        13829156,
        13830055,
        13831863,
        13834438,
        13837905,
        13838914,
        13839447,
        13839527,
        13840389,
        13843111,
        13870210,
        13874374,
        13879447,
        13920613,
        17549034,
        17591072,
        18296520,
        18920996,
        18921332,
        18921699,
        19145912,
        20003687,
        23554360,
        24245454,
        24260287,
        26674882,
        27652381,
        27766184,
        27776582,
        27813643,
        27943088,
        27992022,
        28020322,
        28147383,
        28169198,
        28214208,
        28335044,
        28422388,
        28426292,
        30049972,
        30209085,
        30722718,
        32521898,
        33368350,
        36459532,
        37231265,
        37272604,
        37443737,
        37548563,
        37556277,
        37557178,
        37618825,
        37726892,
        37746110,
        37754448,
        37799238,
        37800124,
        37815720,
        37819901,
        37830699,
        37832351,
        37834191,
        37840737,
        37841352,
        37843653,
        37860194,
        37860728,
        37893739,
        37895052,
        37898042,
        37928277,
        37929124,
        39425095,
        39516031,
        41673625,
        43043372,
        45677874,
        49555500,
        49658220,
        51570552,
        51739111,
        57460462,
        60259881,
        60290877,
        60318715,
        60343496,
        60343717,
        60401697,
        60420106,
        63258789,
        63275342,
        63276612,
        63282573,
        63286450,
        63295288,
        63296776,
        63297283,
        63301468,
        63302445,
        63309164,
        63311389,
        63314028,
        63314882,
        63321170,
        63322396,
        63333972,
        63336916,
        63337608,
        63337749,
        63341145,
        63343278,
        63348292,
        63350009,
        63351991,
        63352057,
        63357095,
        63357452,
        63365346,
        63368997,
        63369085,
        63441109,
        63450973,
        63451011,
        63452917,
        63481543,
        63483444,
        63484845,
        63485132,
        63489246,
        63490286,
        63495048,
        63497609,
        63498602,
        63498878,
        63504657,
        63504821,
        63508131,
        63509307,
        63510547,
        63511944,
        63512293,
        63517574,
        63524806,
        63527099,
        63527837,
        63538177,
        63539260,
        63540435,
        63543307,
        63547842,
        63548524,
        63550786,
        63555321,
        65793953,
        71576573,
        72134552,
        77032785,
        77171493,
        77175104,
        78034893,
        78693614,
        79343644,
        79945821,
        84043610,
        85474001,
        88002164,
        88142509,
        88145528,
        88202122,
        88214974,
        88216364,
        88219513,
        88223752,
        88231090,
        88267863,
        88277858,
        89001703,
        91077572,
        91105529,
        91108874,
        91158688,
        91158871,
        91200120,
        91200258,
        91200442,
        91200456,
        91202249,
        91203251,
        91206061,
        91206063,
        91206989,
        91207526,
        91207531,
        91207994,
        91210807,
        91212497,
        91213779,
        91216658,
        91217311,
        91218263,
        91218743,
        91219203,
        91219211,
        91220517,
        91221457,
        91223161,
        91224110,
        91230155,
        91231145,
        91231359,
        91234252,
        91236504,
        91236512,
        91236914,
        91237044,
        91244268,
        91245863,
        91246658,
        91246766,
        91246885,
        91247425,
        91248082,
        91248263,
        91250052,
        91253411,
        91254363,
        91255692,
        91256204,
        91257383,
        91258402,
        91262199,
        91262608,
        91264989,
        91267272,
        91278196,
        91280066,
        91285121,
        91286940,
        91289960,
        91293637,
        91293643,
        91294723,
        91420067,
        91467121,
        91478255,
        91481162,
        91491900,
        91492958,
        91494140,
        91495890,
        91496903,
        91499144,
        91509084,
        91514530,
        91522850,
        91531051,
        800005727,
        800007076,
        800010165,
        800012323,
        800025467,
        800026042,
        800040431,
        800042169,
        800043848,
        800044402,
        800050068,
        800058001,
        800058016,
        800058706,
        800065396,
        800067514,
        800067515,
        800074112,
        800082275,
        800088098,
        800090902,
        800092641,
        800093391,
        800094898,
        800098983,
        800099283,
        800099778,
        800100610,
        800101570,
        800114312,
        800123572,
        800129856,
        800130907,
        800134848,
        800140486,
        800140949,
        800145376,
        800153993,
        800154343,
        800154879,
        800165994,
        800168156,
        800176890,
        800179966,
        800185449,
        800190798,
        800191916,
        800193904,
        800193989,
        800194671,
        800196433,
        800201726,
        800212422,
        800213676,
        800215019,
        800215642,
        800215758,
        800216303,
        800217861,
        800231038,
        800236839,
        800244287,
        800247537,
        800247599,
        800249241,
        800249700,
        800251760,
        800255963,
        802000774,
        802005417,
        802007056,
        802008496,
        802009783,
        802013023,
        802013835,
        802016607,
        802016761,
        802021040,
        804000364,
        804001273,
        804001491,
        804001616,
        804001912,
        804002009,
        804002105,
        804002599,
        804003036,
        804004930,
        804006302,
        804007868,
        804008057,
        804008792,
        804008983,
        804009440,
        804010040,
        804010706,
        804010718,
        804011701,
        804012557,
        804013017,
        804013374,
        804013775,
        804013820,
        804013885,
        804014329,
        804014637,
        804014715,
        804014898,
        804015110,
        804015454,
        804015473,
        804016084,
        804016911,
        805000427,
        805013881,
        805021148,
        805027743,
        805030765,
        805031223,
        806001383,
        806005641,
        806005772,
        806010837,
        806011811,
        806012265,
        806016797,
        807002424,
        807003768,
        807004440,
        807005580,
        807006312,
        807007139,
        807008204,
        807008278,
        807009235,
        810000913,
        811004055,
        811026603,
        811038804,
        811039981,
        811041637,
        811045925,
        812002299,
        812005590,
        813001952,
        817000248,
        817003166,
        819000134,
        820002033,
        820002654,
        820004433,
        823002778,
        824004867,
        825003080,
        825027546,
        826000923,
        826002585,
        826003318,
        829000331,
        829000347,
        829003945,
        830007229,
        830007355,
        830011670,
        830016163,
        830039670,
        830041236,
        830068119,
        830070324,
        830072817,
        830074184,
        830077444,
        830077644,
        830092048,
        830106920,
        830109866,
        830123073,
        830128856,
        830143035,
        830501223,
        830504926,
        830508233,
        830512407,
        830513056,
        830514421,
        839000794,
        844002789,
        860002134,
        860002274,
        860002428,
        860003216,
        860013779,
        860013874,
        860024030,
        860029002,
        860037232,
        860039561,
        860066191,
        860090545,
        860350940,
        860352591,
        860353122,
        890001639,
        890100577,
        890102140,
        890106527,
        890111797,
        890200138,
        890200141,
        890200142,
        890200567,
        890200732,
        890200928,
        890200957,
        890201063,
        890201213,
        890201229,
        890201334,
        890201495,
        890201578,
        890202024,
        890203115,
        890203183,
        890204134,
        890204659,
        890204789,
        890205399,
        890205425,
        890205516,
        890207459,
        890208104,
        890208885,
        890209654,
        890209698,
        890210619,
        890212398,
        890212568,
        890213065,
        890270275,
        890301430,
        890307200,
        890330348,
        890400693,
        890480135,
        890500516,
        890500890,
        890501438,
        890706833,
        890801201,
        890900928,
        890901826,
        890902922,
        890905177,
        890911816,
        890920990,
        890922577,
        890980997,
        890981848,
        891001122,
        891180098,
        891300047,
        891409291,
        891480000,
        891800023,
        891800213,
        891800231,
        891800395,
        891800498,
        891800570,
        891800611,
        891800982,
        891855039,
        891855438,
        891855847,
        891856161,
        891856372,
        892115006,
        892115096,
        892200273,
        892300678,
        892399994,
        899999034,
        899999114,
        900002780,
        900006037,
        900008328,
        900009141,
        900016598,
        900022188,
        900030142,
        900036695,
        900039651,
        900054442,
        900055881,
        900057926,
        900058196,
        900064250,
        900065177,
        900065521,
        900066347,
        900067136,
        900067510,
        900067659,
        900069163,
        900073081,
        900074359,
        900075669,
        900098550,
        900101736,
        900103383,
        900105612,
        900109754,
        900110631,
        900111757,
        900112351,
        900114590,
        900123436,
        900124874,
        900126800,
        900130530,
        900133819,
        900135828,
        900136865,
        900137317,
        900138649,
        900140237,
        900141276,
        900141668,
        900147992,
        900149596,
        900150380,
        900156092,
        900156264,
        900171988,
        900174577,
        900177138,
        900177355,
        900177624,
        900188353,
        900190045,
        900191362,
        900194140,
        900208845,
        900215616,
        900218796,
        900232369,
        900240018,
        900248081,
        900252734,
        900253742,
        900254202,
        900258293,
        900260064,
        900262242,
        900267665,
        900268644,
        900275508,
        900276658,
        900279660,
        900285746,
        900294380,
        900295971,
        900297521,
        900299328,
        900303416,
        900307987,
        900311669,
        900311736,
        900315429,
        900318153,
        900324186,
        900324452,
        900325997,
        900328323,
        900330752,
        900333818,
        900334151,
        900335341,
        900335845,
        900337253,
        900341391,
        900343036,
        900343345,
        900346262,
        900348830,
        900352728,
        900354928,
        900358456,
        900361147,
        900363344,
        900363673,
        900364535,
        900374653,
        900381084,
        900382713,
        900385260,
        900397985,
        900406470,
        900410413,
        900426758,
        900429130,
        900434947,
        900440118,
        900449706,
        900451902,
        900454669,
        900459190,
        900465319,
        900475067,
        900475840,
        900484777,
        900490479,
        900491595,
        900493135,
        900495400,
        900495859,
        900505162,
        900508891,
        900511608,
        900513313,
        900520007,
        900522104,
        900523068,
        900531204,
        900547694,
        900552714,
        900558595,
        900562697,
        900564046,
        900569802,
        900570537,
        900571887,
        900577479,
        900577773,
        900580248,
        900581154,
        900584817,
        900593392,
        900602267,
        900604982,
        900605491,
        900610121,
        900613066,
        900613550,
        900616935,
        900617414,
        900617693,
        900626139,
        900627466,
        900631361,
        900632392,
        900634720,
        900635194,
        900642187,
        900643716,
        900646332,
        900653649,
        900656791,
        900658587,
        900680730,
        900687104,
        900693988,
        900699086,
        900703359,
        900719201,
        900721489,
        900728399,
        900733829,
        900740837,
        900741512,
        900745762,
        900750920,
        900752620,
        900771349,
        900813434,
        900818004,
        900826841,
        900852060,
        900855108,
        900859623,
        900862002,
        900868176,
        900870339,
        900875222,
        900882292,
        900883079,
        900891513,
        900900754,
        900910047,
        900940341,
        900948824,
        900960619,
        901015744,
        901018236,
        901020976,
        901026947,
        901048158,
        901098709,
        901104819,
        901105034,
        901105085,
        901106415,
        901109697,
        901121919,
        901131639,
        901160412,
        1005104291,
        1020401456,
        1051661593,
        1053778049,
        1057577814,
        1082862765,
        1090473476,
        1095804289,
        1095910462,
        1095914844,
        1095921921,
        1098602368,
        1098607156,
        1098607530,
        1098608989,
        1098610920,
        1098622539,
        1098622919,
        1098628831,
        1098642020,
        1098646463,
        1098661498,
        1098665570,
        1098669014,
        1098673078,
        1098676413,
        1098679845,
        1098683614,
        1098691913,
        1098692961,
        1098696687,
        1098700272,
        1098710696,
        1098714303,
        1098725952,
        1098728180,
        1098751535,
        1100894083,
        1100963962,
        1102355545,
        1142720448,
        94062008320
    ];
    }
?>